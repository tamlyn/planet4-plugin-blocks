{"version":3,"sources":["partials/back-top.js","partials/blocks_hover.js","partials/blocks_wide.js","partials/can_do_steps.js","partials/carousel_header.js","partials/happy_point.js","partials/load_more.js","partials/post_action.js","partials/pubslider.js"],"names":["$","document","ready","$backtop","length","window","scroll","this","scrollTop","fadeIn","css","fadeOut","click","animate","hover","parent","addClass","removeClass","$wideblocks","$container","force_wide_blocks","vw","width","each","innerWidth","margin","on","attr","step","data","toggleClass","find","get","currentSrc","replace","SLIDE_TRANSITION_SPEED","$headerCarousel","$carouselIndicators","$slides","activeTransition","nextSlide","el","$el","$nextSlide","next","prevAll","last","switchIndicator","index","children","i","advanceCarousel","$active","filter","$next","clearTimeout","setTimeout","backwardsCarousel","$previousSlide","activate","prev","nextAll","slideIndex","$slide","eq","hasClass","appendTo","$img","$nextImg","img_src","$preview","prependTo","next_img_src","evt","preventDefault","target","carousel_element","carousel_head_hammer","Hammer","recognizers","hammer","Manager","element","swipe","Swipe","add","event","y","load_happy_point","removeEventListener","getBoundingClientRect","top","innerHeight","append","src","decodeURIComponent","url","cellSpacing","allowtransparency","frameborder","scrolling","addEventListener","visible_posts","off","$row","closest","posts_per_row","blur","slice","show","hide","visible_covers","covers_per_row","$articles","image","setAttribute","getAttribute","onload","removeAttribute","slideDown","$sidebar","offset","topPadding","absPosition","outerHeight","stop","marginTop","pubSlidesNum","slick","infinite","mobileFirst","slidesToShow","slidesToScroll","arrows","dots","responsive","breakpoint","settings"],"mappings":"AAAAA,EAAAC,UAAAC,MAAA,WACA,aAEA,MAAAC,EAAAH,EAAA,aACAA,EAAA,kBAEAI,OAAA,IACAJ,EAAAK,QAAAC,OAAA,WACAN,EAAAO,MAAAC,YAAA,KACAL,EAAAM,SACAT,EAAA,yBAAAI,OAAA,EACAD,EAAAO,IAAA,SAAA,SAEAP,EAAAO,IAAA,SAAA,SAGAP,EAAAQ,YAIAR,EAAAS,MAAA,WAIA,OAHAZ,EAAA,cAAAa,QAAA,CACAL,UAAA,GACA,MACA,OCtBAR,EAAAC,UAAAC,MAAA,WACA,aAEAF,EAAA,4BAAAc,MACA,WACAd,EAAA,8BAAAA,EAAAO,MAAAQ,UAAAC,SAAA,kBACA,WACAhB,EAAA,8BAAAA,EAAAO,MAAAQ,UAAAE,YAAA,mBAIAjB,EAAA,+BAAAc,MACA,WACAd,EAAA,KAAAA,EAAAO,MAAAQ,UAAAC,SAAA,sBACA,WACAhB,EAAA,KAAAA,EAAAO,MAAAQ,UAAAE,YAAA,yBCfAjB,EAAAC,UAAAC,MAAA,WACA,aAEA,IAAAgB,EAAAlB,EAAA,eACAmB,EAAAnB,EAAA,qBAEA,SAAAoB,IACA,IAAAC,EAAAF,EAAAG,QACAJ,EAAAK,KAAA,WACA,IAAAD,EAAAtB,EAAAO,MAAAiB,aAEAC,GAAAJ,EAAAC,GAAA,EAEAtB,EAAAO,MAAAG,IAAA,cAAAe,EAAA,QAIAP,EAAAd,OAAA,GAAAe,EAAAf,OAAA,GACAgB,IACApB,EAAAK,QAAAqB,GAAA,SAAAN,KAEApB,EAAA,eAAA2B,KAAA,QAAA,qFACA3B,EAAA,UAAA2B,KAAA,QAAA,cCxBA3B,EAAAC,UAAAC,MAAA,WACA,aAEAF,EAAA,sBAAAc,MAAA,WACA,MAAAc,EAAA5B,EAAAO,MAAAsB,KAAA,MACA7B,EAAA,SAAA4B,GAAAE,YAAA,cCHA9B,EAAAC,UAAAC,MAAA,WACA,aAGAF,EAAA,4BAAA+B,KAAA,OAAAL,GAAA,OAAA,WACA1B,EAAAO,MAAAyB,IAAA,GAAAC,aACAjC,EAAAO,MAAAQ,SAAAL,IAAA,oBAAAwB,QAAA,kBAAA,IAAAA,QAAA,YAAA,KAEAlC,EAAAO,MAAAQ,SAAAL,IAAA,mBAAA,OAAAV,EAAAO,MAAAyB,IAAA,GAAAC,WAAA,OAWA,IAAAE,EAAA,IACAC,EAAApC,EAAA,4BACAqC,EAAAD,EAAAL,KAAA,wBACAO,EAAAF,EAAAL,KAAA,kBACAQ,EAAA,KAQA,SAAAC,EAAAC,GACA,IAAAC,EAAA1C,EAAAyC,GACAE,EAAAD,EAAAE,KAAA,kBAEA,OAAAD,EAAAvC,OAAAuC,EAAAD,EAAAG,QAAA,kBAAAC,OAUA,SAAAC,EAAAC,GACAX,EAAAY,WAAA1B,KAAA,SAAA2B,EAAAT,GACAzC,EAAAyC,GAAAX,YAAA,SAAAoB,IAAAF,KA2CA,SAAAG,IACA,IAAAC,EAAAd,EAAAe,OAAA,WACAC,EAAAd,EAAAY,GAAApC,SAAA,QAEA,GAAAuB,EAQA,OANAgB,aAAAhB,GACAA,EAAA,KACAD,EAAArB,YAAA,mCACAqC,EAAAtC,SAAA,UACAwB,EAAAc,GAAAtC,SAAA,aACAmC,IAKAC,EAAApC,SAAA,cAEA+B,EAAAT,EAAAU,MAAAM,IAGAf,EAAAiB,WAAA,WACAJ,EAAApC,SAAA,YACAuB,EAAAiB,WAAA,WACAJ,EAAAnC,YAAA,UACAqB,EAAArB,YAAA,uBACAqC,EAAArC,YAAA,QAAAD,SAAA,UAEAwB,EAAAc,GAAAtC,SAAA,QACAuB,EAAA,MACAJ,EAAA,IACAA,GAGA,SAAAsB,IACA,IAtFAf,EACAgB,EAqFAN,EAAAd,EAAAe,OAAA,WAEAM,GAxFAjB,EAAA1C,EAuFAoD,IAtFAM,EAAAhB,EAAAkB,KAAA,mBACAxD,OAAAsD,EAAAhB,EAAAmB,QAAA,kBAAAf,QAsFAjB,KAAA,UAQA,SAAA8B,EAAAG,GACA,IAAAC,EAAAzB,EAAA0B,GAAAF,GAEAC,EAAAE,SAAA,YAAAF,EAAAE,SAAA,gBAKAF,EAAAE,SAAA,QAEAd,KAIAZ,GACAgB,aAAAhB,GAGAQ,EAAAe,GAEAxB,EAAArB,YAAA,mCACA8C,EAAA/C,SAAA,UACAwB,EAAAuB,GAAA/C,SAAA,UAcA,GAxHAsB,EAAAf,KAAA,SAAA2B,EAAAT,GACA,IAAAsB,EAAA/D,EAAAyC,GAGAzC,EAAA,QACA2B,KAAA,cAAA,4BACAA,KAAA,gBAAAuB,GACApB,YAAA,SAAA,IAAAoB,GACAgB,SAAA7B,GAGA,IAAA8B,EAAAJ,EAAAhC,KAAA,OACAqC,EAAA5B,EAAAuB,GAAAhC,KAAA,OACAsC,EAAAF,EAAAnC,IAAA,GAAAC,YAAAkC,EAAAxC,KAAA,OAKA,GAJAoC,EACArD,IAAA,mBAAA,OAAA2D,EAAA,KACA3D,IAAA,sBAAAyD,EAAAtC,KAAA,wBAEAuC,EAAAhE,OAAA,EAAA,CAEA,IAAAkE,EAAAtE,EAAA,SACAgB,SAAA,yBACAuD,UAAAR,GAEAS,EAAAJ,EAAApC,IAAA,GAAAC,YAAAmC,EAAAzC,KAAA,OACA3B,EAAA,SACAgB,SAAA,oBACAN,IAAA,mBAAA,OAAA8D,EAAA,KACA9D,IAAA,sBAAA0D,EAAAvC,KAAA,wBACAqC,SAAAI,GAIAP,EAAApC,KAAA,aAAAuB,KA6EAd,EAAAV,GAAA,QAAA,yBAAA,SAAA+C,GACAA,EAAAC,iBACAvB,MACAzB,GAAA,QAAA,0BAAA,SAAA+C,GACAA,EAAAC,iBACAf,EAAA3D,EAAAyE,EAAAE,QAAA9C,KAAA,eAKA7B,EAAA,oBAAAI,OAAA,EAAA,CACA,IAAAwE,EAAA5E,EAAA,oBAAA,GACA6E,EAAA,IAAAC,OAAAF,EAAA,CAAAG,YAAA,KACAC,EAAA,IAAAF,OAAAG,QAAAJ,EAAAK,SACAC,EAAA,IAAAL,OAAAM,MACAJ,EAAAK,IAAAF,GAEAH,EAAAtD,GAAA,YAAA,WACAyB,MAGA6B,EAAAtD,GAAA,aAAA,WACA+B,MAIAuB,EAAAtD,GAAA,UAAA,SAAA4D,GACA,IAAAC,EAAAvF,EAAAK,QAAAG,YACA8E,EAAAZ,iBACA1E,EAAA,cAAAa,QAAA,CAAAL,UAAA+E,EAAA,QAEAP,EAAAtD,GAAA,YAAA,SAAA4D,GACA,IAAAC,EAAAvF,EAAAK,QAAAG,YACA8E,EAAAZ,iBACA1E,EAAA,cAAAa,QAAA,CAAAL,UAAA+E,EAAA,WCpMAvF,EAAAC,UAAAC,MAAA,WACA,aAEA,SAAAsF,IACA,GAAAxF,EAAA,yBAAAI,OAAA,EAIA,OAHAC,OAAAoF,oBAAA,OAAAD,GACAnF,OAAAoF,oBAAA,SAAAD,QACAnF,OAAAoF,oBAAA,SAAAD,GAIAxF,EAAA,gBAAA,GAAA0F,wBAEAC,IAAAtF,OAAAuF,aACA5F,EAAA,gBAAA6F,OAAA7F,EAAA,qBACA2B,KAAA,CACAmE,IAAAC,mBAAAC,GACAC,YAAA,IACAC,kBAAA,OACAC,YAAA,IACAC,UAAA,KACA9E,MAAA,UAKA,MAAA0E,EAAAhG,EAAA,gBAAA6B,KAAA,OAEAmE,IACA3F,OAAAgG,iBAAA,OAAAb,GACAnF,OAAAgG,iBAAA,SAAAb,GACAnF,OAAAgG,iBAAA,SAAAb,MChCAxF,EAAAC,UAAAC,MAAA,WAGAF,EAAA,wBAAAuB,KAAA,WACA,IAAA+E,EAAAtG,EAAA,uBAAAA,EAAAO,OAAAH,OAEA,GAAAkG,EAAA,EACAtG,EAAAO,MAAAoB,KAAA,qBAAA,GACA,GAAA2E,EAAA,GACAtG,EAAAO,MAAAoB,KAAA,qBAAA,KAKA3B,EAAA,8BAAAuG,IAAA,SAAA7E,GAAA,QAAA,WACA,IAAA8E,EAAAxG,EAAA,sBAAAA,EAAAO,MAAAkG,QAAA,eACAC,EAAA1G,EAAAO,MAAAkG,QAAA,wBAAA5E,KAAA,iBAEA7B,EAAAO,MAAAoG,OACAH,EAAApG,OAAA,GACAoG,EAAAI,MAAA,EAAAF,GAAAG,KAAA,QAEAL,EAAApG,QAAAsG,GACA1G,EAAAO,MAAAkG,QAAA,+BAAAK,KAAA,UAMA9G,EAAA,iBAAAuB,KAAA,WACA,IAAAwF,EAAA/G,EAAA,6BAAAA,EAAAO,OAAAH,OACA,GAAA2G,EAAA,EACA/G,EAAAO,MAAAoB,KAAA,sBAAA,GACA,GAAAoF,EAAA,GACA/G,EAAAO,MAAAoB,KAAA,sBAAA,KAKA3B,EAAA,+BAAAuG,IAAA,SAAA7E,GAAA,QAAA,WACA,IAAA8E,EAAAxG,EAAA,4BAAAA,EAAAO,MAAAkG,QAAA,eACAO,EAAAhH,EAAAO,MAAAkG,QAAA,iBAAA5E,KAAA,kBAEA7B,EAAAO,MAAAoG,OACAH,EAAApG,OAAA,GACAoG,EAAAI,MAAA,EAAAI,GAAAH,KAAA,QAEAL,EAAApG,QAAA4G,GACAhH,EAAAO,MAAAkG,QAAA,gCAAAK,KAAA,UAKA9G,EAAA,iCAAAuG,IAAA,SAAA7E,GAAA,QAAA,WACA,IAAAuF,EAAAjH,EAAA,4BAAAA,EAAAO,MAAAkG,QAAA,gBAGAzG,EAAAO,MAAAoG,OACAM,EAAA7G,OAAA,KAGAJ,EAAA,iCACA4G,MAAA,EAPA,GAOArF,KAAA,WACA,IAAA2F,EAAA3G,KACA2G,EAAAC,aAAA,MAAAD,EAAAE,aAAA,aACAF,EAAAG,OAAA,WACAH,EAAAI,gBAAA,eAGAL,EAAAL,MAAA,EAdA,GAcA3F,YAAA,UAAAN,QAAA,GAAA4G,UAAA,SAGA,KADAN,EAAAjH,EAAA,4BAAAA,EAAAO,MAAAkG,QAAA,gBACArG,QACAJ,EAAAO,MAAAkG,QAAA,kCAAAK,KAAA,YCvEA9G,EAAAC,UAAAC,MAAA,WACA,aAEA,IAAAsH,EAAAxH,EAAA,iBAAA+B,KAAA,kBACA0F,EAAAD,EAAAC,SACAC,EAAA,IAiBAF,EAAApH,OAAA,GAAAJ,EAAAK,QAAAiB,QAAA,KACAjB,OAAAgG,iBAAA,SAhBA,WACA,IAAAsB,EAAA3H,EAAA,gCAAAyH,SAAA9B,IAAA6B,EAAAI,cAAAF,EAEA1H,EAAAK,QAAAG,YAAAiH,EAAA9B,KAAA3F,EAAAK,QAAAG,YAAAmH,GACAH,EAAAK,OAAAhH,QAAA,CACAiH,UAAA9H,EAAAK,QAAAG,YAAAiH,EAAA9B,IAAA+B,IAGA1H,EAAAK,QAAAG,YAAAiH,EAAA9B,KACA6B,EAAAK,OAAAhH,QAAA,CACAiH,UAAA,QCnBA9H,EAAAC,UAAAC,MAAA,WACA,aA6BAF,EAAA,wBAAAuB,KAAA,WACA,IAAAwG,EAAA/H,EAAA,oCAAAA,EAAAO,OAAAH,OAEA2H,EAAA,GAAA/H,EAAAK,QAAAiB,QAAA,KA5BAtB,EA6BA,wBA7BAgI,MAAA,CACAC,UAAA,EACAC,aAAA,EACAC,aAAA,IACAC,eAAA,EACAC,QAAA,EACAC,MAAA,EACAC,WAAA,CACA,CACAC,WAAA,IACAC,SAAA,CAAAN,aAAA,IAEA,CACAK,WAAA,IACAC,SAAA,CAAAN,aAAA,IAEA,CACAK,WAAA,IACAC,SAAA,CAAAN,aAAA,OAaAJ,EAAA,GAAA/H,EAAAK,QAAAiB,QAAA,KACAtB,EAAA,gBAAAiB,YAAA,YAAAA,YAAA,YAAAD,SAAA","file":"main.js","sourcesContent":["$(document).ready(function() {\n  'use strict';\n\n  const $backtop = $('.back-top');\n  const $submenu = $('.submenu-block');\n\n  if ($submenu.length > 0) {\n    $(window).scroll(function () {\n      if ($(this).scrollTop() > 400) {\n        $backtop.fadeIn();\n        if ($('.cookie-block:visible').length > 0) {\n          $backtop.css('bottom', '120px');\n        } else {\n          $backtop.css('bottom', '50px');\n        }\n      } else {\n        $backtop.fadeOut();\n      }\n    });\n\n    $backtop.click(function () {\n      $('body, html').animate({\n        scrollTop: 0\n      }, 800);\n      return false;\n    });\n  }\n});\n","// Underline headlines on thumbnail hover.\n\n$(document).ready(function() {\n  'use strict';\n\n  $('.article-list-item-image').hover(\n    function() {\n      $('.article-list-item-headline', $(this).parent()).addClass('article-hover');\n    }, function() {\n      $('.article-list-item-headline', $(this).parent()).removeClass('article-hover');\n    }\n  );\n\n  $('.four-column-content-symbol').hover(\n    function() {\n      $('h4', $(this).parent()).addClass('four-column-hover');\n    }, function() {\n      $('h4', $(this).parent()).removeClass('four-column-hover');\n    }\n  );\n});\n","// Force wide blocks outside the container\n\n$(document).ready(function() {\n  'use strict';\n\n  var $wideblocks = $('.block-wide');\n  var $container = $('div.page-template');\n\n  function force_wide_blocks() {\n    var vw = $container.width();\n    $wideblocks.each(function() {\n      var width = $(this).innerWidth();\n\n      var margin = ((vw - width) / 2);\n\n      $(this).css('margin-left', margin + 'px');\n    });\n  }\n\n  if ($wideblocks.length > 0 && $container.length > 0) {\n    force_wide_blocks();\n    $(window).on('resize', force_wide_blocks);\n  } else {\n    $('.block-wide').attr('style','margin: 0px !important;padding-left: 0px !important;padding-right: 0px !important');\n    $('iframe').attr('style','left: 0');\n  }\n});\n","$(document).ready(function() {\n  'use strict';\n\n  $('.can-do-steps .col').hover(function() {\n    const step = $(this).data('id');\n    $('#step-' + step).toggleClass('active');\n  });\n});\n","/* global Hammer */\n\n$(document).ready(function() {\n  'use strict';\n\n  // Add event listeners when window is resized, change the carousel's images background attribute to the current loaded ones.\n  $('#carousel-wrapper-header').find('img').on('load', function () {\n    var current_img_src = $(this).get(0).currentSrc;\n    var current_bg_img = $(this).parent().css('background-image').replace(/.*\\s?url\\(['\"]?/, '').replace(/['\"]?\\).*/, '');\n    if (current_img_src !== current_bg_img) {\n      $(this).parent().css('background-image', 'url(' + $(this).get(0).currentSrc + ')');\n    }\n  });\n\n  /**\n  * This module provides a custom slideshow mechanism for use with the header carousel.\n  * The transition behavior in this block is too complex to be easily layered upon the\n  * default bootstrap carousel.\n  */\n\n  // SLIDE_TRANSITION_SPEED should match $slide-transition-speed in _carousel_header.scss.\n  var SLIDE_TRANSITION_SPEED = 1000;\n  var $headerCarousel = $('#carousel-wrapper-header');\n  var $carouselIndicators = $headerCarousel.find('.carousel-indicators');\n  var $slides = $headerCarousel.find('.carousel-item');\n  var activeTransition = null;\n\n  /**\n  * Given an active slide return the next slide, wrapping around the end of the carousel.\n  *\n  * @param {HTMLElement|jQuery} slide A slide in the carousel.\n  * @returns {jQuery} A jQuery selection of the next slide.\n  */\n  function nextSlide(el) {\n    var $el = $(el);\n    var $nextSlide = $el.next('.carousel-item');\n    // prevAll returns items in reverse DOM order: the first slide is the last element.\n    return $nextSlide.length ? $nextSlide : $el.prevAll('.carousel-item').last();\n  }\n\n  function previousSlide(el) {\n    var $el = $(el);\n    var $previousSlide = $el.prev('.carousel-item');\n    return $previousSlide.length ? $previousSlide : $el.nextAll('.carousel-item').last();\n  }\n\n  // Update active slide indicators\n  function switchIndicator(index) {\n    $carouselIndicators.children().each(function(i, el) {\n      $(el).toggleClass('active', i === index);\n    });\n  }\n\n  $slides.each(function (i, el) {\n    var $slide = $(el);\n\n    // Populate carousel indicators list\n    $('<li>')\n      .attr('data-target', '#carousel-wrapper-header')\n      .attr('data-slide-to', i)\n      .toggleClass('active', i === 0)\n      .appendTo($carouselIndicators);\n\n    // Convert the provided image tag into background image styles.\n    var $img = $slide.find('img');\n    var $nextImg = nextSlide($slide).find('img');\n    var img_src = $img.get(0).currentSrc || $img.attr('src');\n    $slide\n      .css('background-image', 'url(' + img_src + ')')\n      .css('background-position', $img.data('background-position'));\n\n    if ($nextImg.length > 0) {\n      // Add an element within the slide to hold the next slide preview.\n      var $preview = $('<div>')\n        .addClass('carousel-preview-wrap')\n        .prependTo($slide);\n\n      var next_img_src = $nextImg.get(0).currentSrc || $nextImg.attr('src');\n      $('<div>')\n        .addClass('carousel-preview')\n        .css('background-image', 'url(' + next_img_src + ')')\n        .css('background-position', $nextImg.data('background-position'))\n        .appendTo($preview);\n    }\n\n    // Populate carousel slide index\n    $slide.attr('data-slide', i);\n  });\n\n  /**\n  * Advance to the next slide in the carousel.\n  */\n  function advanceCarousel() {\n    var $active = $slides.filter('.active');\n    var $next = nextSlide($active).addClass('next');\n\n    if (activeTransition) {\n      // A transition is in progress, so proceed to the next pair of slides\n      clearTimeout(activeTransition);\n      activeTransition = null;\n      $slides.removeClass('fade-out slide-over active next');\n      $next.addClass('active');\n      nextSlide($next).addClass('next');\n      advanceCarousel();\n      return;\n    }\n\n    // Transition out the active slide\n    $active.addClass('slide-over');\n\n    switchIndicator($slides.index($next));\n\n    // When transition is done, swap out the slides\n    activeTransition = setTimeout(function beginTransition() {\n      $active.addClass('fade-out');\n      activeTransition = setTimeout(function completeTransition() {\n        $active.removeClass('active');\n        $slides.removeClass('slide-over fade-out');\n        $next.removeClass('next').addClass('active');\n        // Ensure the new upcoming slide has .next\n        nextSlide($next).addClass('next');\n        activeTransition = null;\n      }, SLIDE_TRANSITION_SPEED / 2);\n    }, SLIDE_TRANSITION_SPEED);\n  }\n\n  function backwardsCarousel() {\n    var $active = $slides.filter('.active');\n    var $previous = previousSlide($active);\n    activate($previous.data('slide'));\n  }\n\n  /**\n  * Switch to a specific slide.\n  *\n  * @param {Number} slideIndex The index of a slide in the carousel.\n  */\n  function activate(slideIndex) {\n    var $slide = $slides.eq(slideIndex);\n\n    if ($slide.hasClass('active') && !$slide.hasClass('slide-over')) {\n      // If the requested slide is active and not transitioning, do nothing.\n      return;\n    }\n\n    if ($slide.hasClass('next')) {\n      // If the slide being requested is next, transition normally.\n      advanceCarousel();\n      return;\n    }\n\n    if (activeTransition) {\n      clearTimeout(activeTransition);\n    }\n\n    switchIndicator(slideIndex);\n\n    $slides.removeClass('active next slide-over fade-out');\n    $slide.addClass('active');\n    nextSlide($slide).addClass('next');\n  }\n\n  // Bind mouse interaction events\n  $headerCarousel.on('click', '.carousel-control-next', function(evt) {\n    evt.preventDefault();\n    advanceCarousel();\n  }).on('click', '.carousel-indicators li', function (evt) {\n    evt.preventDefault();\n    activate($(evt.target).data('slide-to'));\n  });\n\n\n  /* Carousel header swipe on mobile */\n  if($('.carousel-header').length > 0) {\n    var carousel_element = $('.carousel-header')[0];\n    var carousel_head_hammer = new Hammer(carousel_element, { recognizers: [] });\n    var hammer = new Hammer.Manager(carousel_head_hammer.element);\n    var swipe = new Hammer.Swipe();\n    hammer.add(swipe);\n\n    hammer.on('swipeleft', function(){\n      advanceCarousel();\n    });\n\n    hammer.on('swiperight', function(){\n      backwardsCarousel();\n    });\n\n    // Vertical swiping on carousel should scroll the page\n    hammer.on('swipeup', function(event){\n      var y = $(window).scrollTop();\n      event.preventDefault();\n      $('html, body').animate({scrollTop: y + 200});\n    });\n    hammer.on('swipedown', function(event){\n      var y = $(window).scrollTop();\n      event.preventDefault();\n      $('html, body').animate({scrollTop: y - 200});\n    });\n  }\n});\n","// Load happy point iframe only when visible\n$(document).ready(function() {\n  'use strict';\n\n  function load_happy_point() {\n    if ($('#happy-point > iframe').length > 0) {\n      window.removeEventListener('load', load_happy_point);\n      window.removeEventListener('resize', load_happy_point);\n      window.removeEventListener('scroll', load_happy_point);\n      return;\n    }\n\n    const happy_pos = $('#happy-point')[0].getBoundingClientRect();\n\n    if (happy_pos.top < window.innerHeight) {\n      $('#happy-point').append($('<iframe></iframe>')\n        .attr({\n          src: decodeURIComponent(url),\n          cellSpacing: '0',\n          allowtransparency: 'true',\n          frameborder: '0',\n          scrolling: 'no',\n          width: '100%'\n        }));\n    }\n  }\n\n  const url = $('#happy-point').data('src');\n\n  if (url) {\n    window.addEventListener('load', load_happy_point);\n    window.addEventListener('resize', load_happy_point);\n    window.addEventListener('scroll', load_happy_point);\n  }\n});\n","$(document).ready(function () {\n  // Block: Content Four Column functionality.\n  // Find out how many posts per row are being displayed.\n  $('.four-column-content').each( function() {\n    var visible_posts = $('.post-column:visible', $(this)).length;\n\n    if (0 === visible_posts % 4) {\n      $(this).attr('data-posts_per_row', 4);\n    } else if (0 === visible_posts % 3) {\n      $(this).attr('data-posts_per_row', 3);\n    }\n  });\n\n  // Add click event for load more button in Covers blocks.\n  $('.btn-load-more-posts-click').off('click').on('click', function () {\n    var $row = $('.post-column:hidden', $(this).closest('.container'));\n    var posts_per_row = $(this).closest('.four-column-content').data('posts_per_row');\n\n    $(this).blur();\n    if ($row.length > 0) {\n      $row.slice( 0, posts_per_row ).show('slow');\n    }\n    if ($row.length <= posts_per_row) {\n      $(this).closest('.load-more-posts-button-div').hide('fast');\n    }\n  });\n\n  // Block: Covers functionality.\n  // Find out how many posts per row are being displayed.\n  $('.covers-block').each( function() {\n    var visible_covers = $('.cover-card-column:visible', $(this)).length;\n    if (0 === visible_covers % 3) {\n      $(this).attr('data-covers_per_row', 3);\n    } else if (0 === visible_covers % 2) {\n      $(this).attr('data-covers_per_row', 2);\n    }\n  });\n\n  // Add click event for load more button in Covers blocks.\n  $('.btn-load-more-covers-click').off('click').on('click', function () {\n    var $row = $('.cover-card-column:hidden', $(this).closest('.container'));\n    var covers_per_row = $(this).closest('.covers-block').data('covers_per_row');\n\n    $(this).blur();\n    if ($row.length > 0) {\n      $row.slice( 0, covers_per_row ).show('slow');\n    }\n    if ($row.length <= covers_per_row) {\n      $(this).closest('.load-more-covers-button-div').hide('fast');\n    }\n  });\n\n  // Add click event for load more button in Articles blocks.\n  $('.btn-load-more-articles-click').off('click').on('click', function () {\n    var $articles = $('.article-list-item.d-none', $(this).closest('.container'));\n    var articles_per_click = 3;\n\n    $(this).blur();\n    if ($articles.length > 0) {\n\n      // Lazy-load images of hidden articles.\n      var $images = $('.article-list-item.d-none img');\n      $images.slice(0, articles_per_click).each(function () {\n        var image = this;\n        image.setAttribute('src', image.getAttribute('data-src'));\n        image.onload = function () {\n          image.removeAttribute('data-src');\n        };\n      });\n      $articles.slice(0, articles_per_click).removeClass('d-none').fadeOut(0).slideDown('slow');\n    }\n    $articles = $('.article-list-item.d-none', $(this).closest('.container'));\n    if ($articles.length === 0) {\n      $(this).closest('.load-more-articles-button-div').hide('fast');\n    }\n  });\n});\n","// Force the Cover card to follow scroll\n\n$(document).ready(function() {\n  'use strict';\n\n  var $sidebar = $('.post-content').find('> #action-card');\n  var offset = $sidebar.offset();\n  var topPadding = 100;\n\n  function scroll_action_card() {\n    let absPosition = $('.post-details > p:last-child').offset().top - $sidebar.outerHeight() - topPadding;\n\n    if ($(window).scrollTop() > offset.top && $(window).scrollTop() < absPosition) {\n      $sidebar.stop().animate({\n        marginTop: $(window).scrollTop() - offset.top + topPadding\n      });\n    }\n    if ($(window).scrollTop() < offset.top) {\n      $sidebar.stop().animate({\n        marginTop: 0\n      });\n    }\n  }\n\n  if ($sidebar.length > 0 && $(window).width() > 992) {\n    window.addEventListener('scroll', scroll_action_card);\n  }\n});\n","$(document).ready(function() {\n  'use strict';\n\n  // convert an element to slider using slick js\n  function slickify(element) {\n    $(element).slick({\n      infinite:       false,\n      mobileFirst:    true,\n      slidesToShow:   2.2,\n      slidesToScroll: 1,\n      arrows:         false,\n      dots:           false,\n      responsive: [\n        {\n          breakpoint: 992,\n          settings: { slidesToShow: 4 }\n        },\n        {\n          breakpoint: 768,\n          settings: { slidesToShow: 3 }\n        },\n        {\n          breakpoint: 576,\n          settings: { slidesToShow: 2 }\n        }\n      ]\n    });\n  }\n\n  // Handle slick functionality for each Content Four Column blocks.\n  $('.four-column-content').each( function() {\n    var pubSlidesNum = $('.publications-slider .post-column', $(this)).length;\n\n    if (pubSlidesNum > 3 && $(window).width() < 768) {\n      slickify('.publications-slider');\n    }\n    if (pubSlidesNum < 4 && $(window).width() > 768) {\n      $('.post-column').removeClass('col-lg-3').removeClass('col-md-4').addClass('col-md');\n    }\n  });\n});\n"]}